services:
  agent:
    build:
      context: ./
      dockerfile: dockerfile_pip_agent
    command: sh -c 'python -m deeppavlov_agent.run -pl demo_stand_pipeline_conf.json -ch http_client'
    env_file: [.env.stand]
    environment:
      WAIT_HOSTS: "10.11.1.251:8008, 10.11.1.251:8011, 10.11.1.251:8009, 10.11.1.251:8010, 10.11.1.251:8012,
        10.11.1.251:8014, 10.11.1.251:8018, 10.11.1.251:8013, 10.11.1.251:8017, 10.11.1.251:8021, 10.11.1.251:8022,
        10.11.1.251:8023, 10.11.1.251:8024, 10.11.1.251:8028, 10.11.1.251:8029, 10.11.1.251:8030, 10.11.1.251:8031,
        10.11.1.251:8032, 10.11.1.251:8033, 10.11.1.251:8036, 10.11.1.251:8037, 10.11.1.251:8038, 10.11.1.251:8000,
        10.11.1.251:8035, 10.11.1.251:8047, 10.11.1.251:8049, 10.11.1.251:8052, 10.11.1.251:8053, 10.11.1.251:8054,
        10.11.1.251:8055, 10.11.1.251:8061, 10.11.1.251:8062, 10.11.1.251:8068, 10.11.1.251:8064, 10.11.1.251:8065,
        10.11.1.251:8066, 10.11.1.251:8057, 10.11.1.251:8070"
    volumes:
      - ".:/dp-agent"
    ports:
      - 4242:4242
version: "3.7"
