FROM python:3.7.4

WORKDIR /src

ARG TAG_BASED_SELECTION
ENV TAG_BASED_SELECTION ${TAG_BASED_SELECTION}
ARG PRIORITIZE_WITH_SAME_TOPIC_ENTITY
ENV PRIORITIZE_WITH_SAME_TOPIC_ENTITY ${PRIORITIZE_WITH_SAME_TOPIC_ENTITY}
ARG PRIORITIZE_NO_DIALOG_BREAKDOWN
ENV PRIORITIZE_NO_DIALOG_BREAKDOWN ${PRIORITIZE_NO_DIALOG_BREAKDOWN}
ARG PRIORITIZE_WITH_REQUIRED_ACT
ENV PRIORITIZE_WITH_REQUIRED_ACT ${PRIORITIZE_WITH_REQUIRED_ACT}
ARG IGNORE_DISLIKED_SKILLS
ENV IGNORE_DISLIKED_SKILLS ${IGNORE_DISLIKED_SKILLS}



COPY ./response_selectors/convers_evaluation_based_selector/requirements.txt requirements.txt
RUN pip install -r requirements.txt
RUN python -c "import nltk; nltk.download('punkt')"

COPY ./response_selectors/convers_evaluation_based_selector/ ./
COPY ./common/ ./common/

CMD gunicorn --workers=2 server:app
